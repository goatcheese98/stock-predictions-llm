<!DOCTYPE html>
<html>
	<head>
		<title>Dodgy Dave's Stock Predictions</title>
		<link rel="stylesheet" href="index.css">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="UTF-8">
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	</head>

	<body>
		<div id="app">
			<header>
				<img src="images/logo-dave-text.png" alt="Dodgy Dave's Stock Predictions">
			</header>
			<main>
				<section class="action-panel" v-show="currentView === 'input'">
					<form id="ticker-input-form" @submit.prevent="handleSubmit">
						<label for="ticker-input"> Add up to 3 stock tickers below to get a super accurate stock predictions reportüëá </label>
						<div class="form-input-control">
							<input type="text" id="ticker-input" v-model="tickerInput" placeholder="MSFT">
							<button type="submit" class="add-ticker-btn">
								<img src="images/add.svg" class="add-ticker-svg" alt="add"> 
							</button>
						</div>
					</form>
					<p class="ticker-choice-display">
						<span v-if="tickersArr.length === 0">Your tickers will appear here...</span>
						<span v-for="ticker in tickersArr" :key="ticker" class="ticker">{{ ticker }}</span>
					</p>
					
					<!-- Personality Selection -->
					<div class="personality-selection">
						<h3>Choose Your Analyst</h3>
						<div class="personality-grid">
							<div class="personality-card" 
								 :class="{ active: selectedPersonality === 'dodgy-dave' }"
								 @click="selectPersonality('dodgy-dave')">
								<div class="personality-avatar">
									<svg viewBox="0 0 100 100" class="personality-icon">
										<circle cx="50" cy="50" r="45" fill="#ff6b35"/>
										<circle cx="35" cy="40" r="5" fill="white"/>
										<circle cx="65" cy="40" r="5" fill="white"/>
										<path d="M30 65 Q50 85 70 65" stroke="white" stroke-width="3" fill="none"/>
										<text x="50" y="25" text-anchor="middle" fill="white" font-size="12" font-weight="bold">$</text>
									</svg>
								</div>
								<div class="personality-name">Dodgy Dave</div>
								<div class="personality-subtitle">The Trading Guru</div>
							</div>
							
							<div class="personality-card" 
								 :class="{ active: selectedPersonality === 'stephen-colbert' }"
								 @click="selectPersonality('stephen-colbert')">
								<div class="personality-avatar">
									<svg viewBox="0 0 100 100" class="personality-icon">
										<circle cx="50" cy="50" r="45" fill="#1f4788"/>
										<circle cx="35" cy="40" r="5" fill="white"/>
										<circle cx="65" cy="40" r="5" fill="white"/>
										<path d="M35 65 Q50 75 65 65" stroke="white" stroke-width="3" fill="none"/>
										<rect x="25" y="25" width="50" height="15" fill="white" rx="2"/>
										<text x="50" y="35" text-anchor="middle" fill="#1f4788" font-size="8" font-weight="bold">NEWS</text>
									</svg>
								</div>
								<div class="personality-name">Stephen Colbert</div>
								<div class="personality-subtitle">The Satirical Analyst</div>
							</div>
							
							<div class="personality-card" 
								 :class="{ active: selectedPersonality === 'scott-galloway' }"
								 @click="selectPersonality('scott-galloway')">
								<div class="personality-avatar">
									<svg viewBox="0 0 100 100" class="personality-icon">
										<circle cx="50" cy="50" r="45" fill="#2c3e50"/>
										<circle cx="35" cy="40" r="5" fill="white"/>
										<circle cx="65" cy="40" r="5" fill="white"/>
										<path d="M35 65 L65 65" stroke="white" stroke-width="3"/>
										<polygon points="30,20 70,20 75,30 25,30" fill="white"/>
										<text x="50" y="28" text-anchor="middle" fill="#2c3e50" font-size="8" font-weight="bold">MBA</text>
									</svg>
								</div>
								<div class="personality-name">Scott Galloway</div>
								<div class="personality-subtitle">The Business Professor</div>
							</div>
							
							<div class="personality-card" 
								 :class="{ active: selectedPersonality === 'bernie-sanders' }"
								 @click="selectPersonality('bernie-sanders')">
								<div class="personality-avatar">
									<svg viewBox="0 0 100 100" class="personality-icon">
										<circle cx="50" cy="50" r="45" fill="#d32f2f"/>
										<circle cx="35" cy="40" r="5" fill="white"/>
										<circle cx="65" cy="40" r="5" fill="white"/>
										<path d="M30 65 Q50 80 70 65" stroke="white" stroke-width="3" fill="none"/>
										<path d="M35 25 Q50 15 65 25" stroke="white" stroke-width="2" fill="none"/>
										<text x="50" y="85" text-anchor="middle" fill="white" font-size="10" font-weight="bold">‚úä</text>
									</svg>
								</div>
								<div class="personality-name">Bernie Sanders</div>
								<div class="personality-subtitle">The Economic Populist</div>
							</div>
						</div>
					</div>
					
					<button class="generate-report-btn" type="button" :disabled="tickersArr.length === 0" @click="fetchStockData" onclick="console.log('Generate Report button clicked!')">
						Generate Report
					</button>
					<p class="tag-line">Always correct 15% of the time!</p>
				</section>
				
				<section class="loading-panel" :class="{ show: currentView === 'loading' }">
					<div class="loading-tickers">
						Analyzing: {{ tickersArr.join(', ') }}
					</div>
					
					<div class="progress-steps">
						<div class="progress-step" :class="{ 
							active: loadingStep === 'fetching', 
							completed: loadingStep === 'analyzing' || loadingStep === 'generating' 
						}">
							<div class="progress-step-icon">üìä</div>
							<div class="progress-step-text">Fetching Stock Data</div>
						</div>
						<div class="progress-step" :class="{ 
							active: loadingStep === 'analyzing', 
							completed: loadingStep === 'generating' 
						}">
							<div class="progress-step-icon">ü§ñ</div>
							<div class="progress-step-text">AI Analysis</div>
						</div>
						<div class="progress-step" :class="{ 
							active: loadingStep === 'generating' 
						}">
							<div class="progress-step-icon">üìù</div>
							<div class="progress-step-text">Generating Report</div>
						</div>
					</div>
					
					<div class="loading-spinner">
						<div class="spinner"></div>
					</div>
					
					<div id="api-message">
						{{ loadingMessage }}<span class="loading-dots"></span>
					</div>
				</section>
			</main>
			<footer>
				&copy; This is not real financial advice!
			</footer>
		</div>
		
		<script src="index.js" type="module"></script>
	</body>
</html>